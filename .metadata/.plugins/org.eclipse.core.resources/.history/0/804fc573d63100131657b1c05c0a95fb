package ui;


import javax.swing.JTextArea;

import ui.eventHandling.UiEvent;
import ui.eventHandling.UiEventListener;
import ui.mainView.NavigationPanel;
import ui.mainView.TeamChoiceBox;
import ui.mainView.TeamNameLabel;
import ui.mainView.TickerPanel;
import ui.playerView.PlayerViewPanel;
import ui.playerView.elements.IconStatPanelController;
import ui.playerView.elements.PlayerImageLabel;
import ui.playerView.elements.PlayerStoryTextArea;
import ui.playerView.elements.TeamHistoryPanel;
import ui.teamView.TeamViewPanel;
import ui.teamView.elements.PlayerPanelController;
import ui.teamView.elements.TeamAttributePanel;

/**
 * Kontrolliert welche View angezeigt wird und initalisiert sie
 * @author Katy
 *
 */
public class MainPanelController implements UiEventListener{
	
	private MainPanel view;
	
	//Werden nicht nur in einer Sicht gebraucht
	private NavigationPanel navi;
	private TeamChoiceBox teamChoice;//Teamauswahlbox
	private TeamNameLabel teamNameLabel;
	
	private TickerPanel tickerPanel;
	
	private TeamViewPanel teamViewPanel;
	private PlayerViewPanel playerViewPanel;
	
	
	
	public MainPanelController(){
		view = new MainPanel();
		navi = new NavigationPanel();
		
		teamChoice = new TeamChoiceBox();
		teamNameLabel = new TeamNameLabel();
		tickerPanel = new TickerPanel();

		//addMainView();
		initLoginView();

		//Der Controller hört auf die Teamauswahl und die Playerpanel zum switchen der View
		teamChoice.addListener(this);
	}
	
	
	private void initLoginView() {
		
		
	}


	private void addMainView() {
		view.addElement(navi);
		view.addElement(teamChoice);
		view.addElement(teamNameLabel);
		view.addElement(tickerPanel);
		updateView();
	}
	
	private void addTeamView() {
		teamViewPanel = new TeamViewPanel();
		teamViewPanel.addListener(this);
		
		teamNameLabel.setText(teamChoice.getTeamname());
		
		view.removeElement(tickerPanel);
		view.add(teamViewPanel);
		
		updateView();
	}
	
	private void addPlayerView() {
		playerViewPanel = new PlayerViewPanel();
		
		view.remove(teamViewPanel);
		view.removeElement(teamChoice);
		view.removeElement(teamNameLabel);
		view.add(playerViewPanel);
		
		updateView();
	}

	public MainPanel getView(){
		return view;
	}

	//TODO nochmal anders lösen, nicht mit diesen Strings
	@Override
	public void onUiEventFired(UiEvent event) {
		
		if(event.getMessage() == "activateTeamView"){
			addTeamView();
		}else if(event.getMessage() == "activatePlayerView"){
			addPlayerView();
		}
	}
	

	public void updateView(){
		view.revalidate();
		view.repaint();
	}
}
